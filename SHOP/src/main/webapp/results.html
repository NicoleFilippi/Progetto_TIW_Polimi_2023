<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>SHOP</title>
	</head>
	<body>
		<a href="Home"><button>Home</button></a>
		<a href="Cart"><button>Cart</button></a>
		<a href="Orders"><button>Orders</button></a>
		
		
		
		<div th:if="${detailedProduct!=null}">
			<h1>DETAILS</h1>
			
			<table border=1>
				<tr>
						<td th:text="${detailedProduct.id}" >0</td>
						<td> <img th:src="${detailedProduct.photoPath}" width=80 height=80></td>
						<td th:text="${detailedProduct.name}"> Name </td>
						<td th:text="${detailedProduct.description}"> Description </td>
				</tr>
			</table>
			<br>
			<table border=1>
				<tr>
					<td> Seller </td>
					<td> Price </td>
					<td> Rating </td>
					<td> Free Shipping Threshold </td>
					<td> Shipping Price Ranges </td>
					<td> # items in Cart </td>
					<td> $ items in Cart </td>
				</tr>
				<tr th:each="supp : ${supplierList}">
						<td th:text="${supp.supplier.name}"> Name </td>
						<td th:text="${supp.price+ ' $'}"> 0 </td>
						<td th:text="${supp.supplier.rating +'/5 stars'}"> rating </td>
						<td th:text="${supp.supplier.freeShippingThreshold}+' $'" >0 $</td>
						<td>
							<ul>
								<li th:each="minq : ${supp.supplier.minQuantities}"
									th:text="${minq + ' products: ' + supp.supplier.shippingPrices[minq]+' $'}"></li>
							</ul>
						</td>
						<td th:text="${supp.supplier.productsInCartNum}"></td>
						<td th:text="${supp.supplier.productsInCartCost}"></td>
						<td> <form action="AddToCart" method="get">
						 		Quantity: <input type="number" name="quantity" min="1" value="1" required><br>
						 		<input type="hidden" name="productId" th:value="${supp.product.id}">
						 		<input type="hidden" name="supplierId" th:value="${supp.supplier.id}">
						 		<input type="submit" value="Add to cart">
						</form> </td>
				</tr>
			</table>
			<br>
			<br>
		</div>
		
		<div th:if="${keyword!=null}">
			<h1>RESULTS</h1>
			<div th:if="${productList == null or productList.isEmpty()}" th:text="${'There are no products matching the keyword ' + keyword}"> </div>
			<div th:if="${!productList.isEmpty()}" th:text="${'Here are the results containing: ' + keyword}"> </div>
			<table>
				<tr th:each="prod : ${productList}">
						<td th:text="${prod.id}" >0</td>
						<td> <img th:src="${prod.photoPath}" width=80 height=80></td>
						<td th:text="${prod.name}"> Name </td>
						<td th:text="${prod.minPrice}+' $'" >0 $</td>
						<td> <a th:href="${'Results?keyword=' + keyword + '&id=' + prod.id}"> Details </a> </td>
				</tr>
			</table>
		</div>
		
		<p th:text="${error}"></p>
	</body>
</html>